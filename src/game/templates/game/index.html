{% extends 'base.html' %}
{% load staticfiles %}

{% block splash %}
  <canvas id="inline-canvas" style="display: none;"></canvas>
{% endblock %}


{% block backboneTemplates %}
	<script type="text/template" id="list-games-template">
	    <h1>Games</h1>
	    <ul>
		    <% _.each(games, function(game) { %>
		    	<li>
                    <a href="#game/<%-game.id %>" data-id="<%- game.id %>"><%-game.title %></a>
                </li>
		    <% }); %>
	    </ul>
    </script>

	<script type="text/template" id="display-game-template">
	    
    	<h3><%-title %></h3>
	    <hr />

	    <div>by <strong><%-owner.name %></strong></div>
        <div class="text-muted">created @ <%- created %></div>
	    <div class="caption">
	    	<p><%- description %></p>
	    </div>

        <button class="btn btn-success" onclick="App.instantiateGame(<%- id %>);">
            <span class="glyphicon glyphicon-plus-sign"></span>
            Create a new instance</button>

        <h3>Instances</h3>
        <% if (instances.length > 0) { %>
            <ul>
            <% _.each(instances, function(instance) { %>
                <li>
                    <%-instance.instantiator.name %>&apos;s instance @ <%- instance.timestamp %><br />
                    <strong>Seed: </strong><%- instance.seed %><br /><br />
                    <a class="btn btn-primary" href="#instance/<%- id %>/<%-instance.id %>" role="button">View &raquo;</a>
                </li>
            <% }); %>
            </ul>
        <% } else { %>
            <em>Creating first instance... 
            <span class="glyphicon glyphicon-refresh fa-spin-custom"></span>
            </em>
        <% } %>
    </script>

    <script type="text/template" id="seed-editor-template">
        <form class="form-inline form-hotizontal">
        <% for (var attr in _seed) { %>
            <div class="form-group">
            <label class="col-sm-2 control-label" for="seed_<%- attr %>"><%- attr %></label>
            <input type="text" class="form-control" id="seed_<%- attr %>" 
                placeholder="" style="width: 100px;"
                value="<%- _seed[attr] %>">
            </div>
        <% } %>
        </form>
    </script>
{% endblock backboneTemplates %}



{% block container %}
	<div class="container text-page" id="page-content">
		<div id="list-games"></div>
		<div id="display-game"></div>
	</div>    
{% endblock container %}



{% block controlPanel %}
<div id="floating-display-control" class="nav-panel" style="display: none;">
    <div class="panel-header" id="control-panel-header">
    
    </div>
    <div class="panel-body">
        <div id="seed-editor">

        </div>
    </div>
    <div class="panel-footer">
        <div class="btn-group" role="group">

          <button type="button" class="btn btn-primary" onclick="App.snapshot();">
              <span class="glyphicon glyphicon-camera"></span>
              Snapshot</button>
          <button type="button" class="btn btn-warning" onclick="App.showSource();">
              <span class="glyphicon glyphicon-eye-open"></span>
              Source</button>
            <button type="button" class="btn btn-success" onclick="showSource();">
              <span class="glyphicon glyphicon-plus-sign"></span>
              Fork</button>
        </div>
    </div>
</div>
{% endblock %}